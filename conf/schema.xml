<?xml version="1.0" encoding="UTF-8"?>

<!--
Copyright (©) 2013-2014 Hannu Väisänen

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<schema name="sukija" version="1.0">
  <fields>
    <!-- Solr 4.1.0 needs this field. -->
    <field name="_version_" type="long" indexed="true" stored="true" multiValued="false"/>

    <field name="id" type="string" indexed="true" stored="true" required="true" multiValued="false"/>

    <field name="text" type="text" indexed="true" stored="true" termOffsets="true" termPositions="true" termVectors="true" multiValued="true"/>
<!--
    <field name="text" type="text" indexed="true" stored="true" multiValued="true"/>
    <field name="text" type="text" indexed="true" stored="false" multiValued="true"/>
-->

    <!-- This field has the proper attributes set to use the Fast Vector Highlighter.
    <field name="text" type="text" indexed="true" stored="true" storeOffsetsWithPositions="true" multiValued="true"/>
-->


    <!-- Default handler for ExtractingRequestHandler defined in the
         solrconfig.xml puts all the Tika's not identified extracted fields
         into fields named 'ingored_XXXXX'.
    -->
    <dynamicField name="ignored_*" type="ignored"/>

   
   <!-- Uncomment the following to ignore any fields that don't already match an existing 
        field name or dynamic field, rather than reporting them as an error. 
        Alternately, change the type="ignored" to some other type e.g. "text" if you want 
        unknown fields indexed and/or stored by default. --> 
   <!--dynamicField name="*" type="ignored" multiValued="true" /-->
  </fields>

  <defaultSearchField>text</defaultSearchField>
  <uniqueKey>id</uniqueKey>


  <types>
    <!-- Solr 4.1.0 needs this field. -->
    <fieldType name="long" class="solr.TrieLongField" precisionStep="0" positionIncrementGap="0"/>

    <fieldtype name="ignored" stored="false" indexed="false" multiValued="true" class="solr.StrField"/>
    <fieldType name="string" class="solr.StrField" sortMissingLast="true" multiValued="false"/>

    <fieldType name="text" class="solr.TextField" positionIncrementGap="1">
      <analyzer type="index">
        <tokenizer class="peltomaa.sukija.finnish.FinnishTokenizerFactory"/>
        <filter class="peltomaa.sukija.hyphen.HyphenFilterFactory"/>
        <filter class="peltomaa.sukija.voikko.VoikkoMorphologyFilterFactory" dictionary="fi" path="${user.home}/vvfst/voikkodict" libvoikkoPath="${user.home}/vvfst/lib/libvoikko.so" libraryPath="${user.home}/vvfst/lib"/>
 <!--
       <filter class="solr.SynonymFilterFactory"
                synonyms="${user.home}/.sukija/synonyms.txt" 
                ignoreCase="true"
                expand="false"/> 
-->
        <!-- Tämä luokka tietää, että å, ä ja ö eivät ole aksentillisia merkkejä. -->
        <filter class="peltomaa.sukija.finnish.FinnishFoldingLowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="peltomaa.sukija.finnish.FinnishFoldingLowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>
  </types>

  <solrQueryParser defaultOperator="OR"/>
</schema>
